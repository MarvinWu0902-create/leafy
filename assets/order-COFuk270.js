import{l as i,u as h}from"./index-BxML_Rvc.js";import{a as e}from"./axios-Bo0ATomq.js";var n={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"marvinapipath",BASE_URL:"/leafy/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:a,VITE_PATH:o}=n,p=(r,t)=>e.post(`${a}/api/${o}/order`,{data:{user:r,message:t}}),l=()=>e.get(`${a}/api/${o}/orders`),s=r=>e.get(`${a}/api/${o}/order/${r}`),c=r=>e.post(`${a}/api/${o}/pay/${r}`),u=i("order",{state(){return{orderStatus:"",orderData:{},orderAllData:[],orderLoading:{get:!1,post:!1,pay:!1}}},actions:{orderChange(r){this.orderStatus=r},postOrder(r,t){this.orderLoading.post=!0,p(r,t).then(d=>{this.orderLoading.post=!1,h.push(`/ordercreate/${d.data.orderId}`)}).catch(()=>{alert("建立訂單失敗")})},getAllOrder(){this.orderLoading.get=!0,l().then(r=>{this.orderLoading.get=!1;const{orders:t}=r.data;this.orderAllData=t}).catch(()=>{alert("取得所有訂單失敗")})},getSingleOrder(r){this.orderLoading.get=!0,s(r).then(t=>{this.orderData=t.data.order,this.orderLoading.get=!1,this.orderData.is_paid?this.orderStatus="finish":this.orderStatus="create"}).catch(()=>{alert("取得單一訂單失敗")})},payOrder(r){this.orderLoading.pay=!0,c(r).then(()=>s(r)).then(t=>{this.orderData=t.data.order,this.orderLoading.pay=!1,this.orderStatus="finish",window.scrollTo({top:0,left:0,behavior:"smooth"})}).catch(()=>{alert("付款失敗")})}}});export{u as o};
