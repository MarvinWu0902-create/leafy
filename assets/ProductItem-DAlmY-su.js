import{l as D,f as b,m as v,_ as y,o as s,c,b as r,a as d,w as x,h as l,v as g,t as i,d as P,r as h}from"./index-BApqB6x0.js";import{a as n}from"./axios-Bo0ATomq.js";import{c as m}from"./cart-DhDnEP8p.js";var w={VITE_URL:"https://ec-course-api.hexschool.io/v2",VITE_PATH:"marvinapipath",BASE_URL:"/leafy/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:p,VITE_PATH:u}=w,C=()=>n.get(`${p}/api/${u}/products/all`),S=t=>n.get(`${p}/api/${u}/product/${t}`),L=t=>n.get(`${p}/api/${u}/products?category=${t}`),F=D("product",{state(){return{productData:[],singleData:{},activeGroup:"全部",paginationConfig:{limitCount:9,currentPage:1},productLoading:{getProduct:!1,getSingle:!1}}},getters:{getGroupAry({productData:t}){return["全部",...new Set(t.map(e=>e.category))]},totalPages({paginationConfig:t}){const{limitCount:e}=t;return Math.ceil(this.groupProductData.length/e)},groupProductData({productData:t,activeGroup:e}){return e==="全部"?t:t.filter(a=>a.category===e)},filterProductData({paginationConfig:t}){const{limitCount:e,currentPage:a}=t;return this.groupProductData.slice((a-1)*e,a*e)}},actions:{getProduct(){this.productLoading.getProduct=!0,C().then(t=>{this.productData=t.data.products,this.productLoading.getProduct=!1}).catch(()=>{alert("取得產品資料失敗")})},getsingleProduct(t){this.productLoading.getSingle=!0,S(t).then(e=>(this.singleData=e.data.product,L(this.singleData.category))).then(e=>{this.productData=e.data.products,this.productLoading.getSingle=!1}).catch(()=>{alert("取得單一產品資料失敗")})},getGroup(t){this.paginationConfig.currentPage=1,this.activeGroup=t},setDefaultGroup(){this.activeGroup="全部"},getPage(t){t!==this.paginationConfig.currentPage&&(this.paginationConfig.currentPage=t,window.scrollTo({top:0,behavior:"smooth"}))}}}),k={props:["product"],data(){return{productData:[]}},computed:{...b(m,["tempId","cartLoading"])},methods:{...v(m,["addCart"])},mounted(){this.productData=this.product}},T={class:"flex flex-col items-center justify-center"},E=["src"],I=r("div",{class:"absolute top-0 left-0 w-full h-[300px] bg-black bg-opacity-0 group-hover:bg-opacity-20 transition duration-500"},null,-1),R=r("div",{class:"absolute bg-white bg-opacity-0 group-hover:bg-opacity-100 translate-y-0 group-hover:-translate-y-6 transition duration-500 left-[0] right-[0] w-2/3 bottom-4 mx-auto text-center px-10 py-3"},[r("p",{class:"text-transparent transition duration-500 group-hover:text-primary"},"查看內容")],-1),V={class:"absolute w-1/4 p-1 text-sm text-center text-red-400 top-2 right-2 bg-main"},A={class:"mb-2 text-center"},G={key:0,class:"mb-2 text-center text-secondary"},N={key:1,class:"mb-2 text-center text-secondary"},B={class:"text-red-400 me-1"},U=["disabled"];function $(t,e,a,O,o,j){const _=h("RouterLink"),f=h("font-awesome-icon");return s(),c("div",null,[r("div",T,[d(_,{class:"relative block w-full group",to:`/product/${o.productData.id}`},{default:x(()=>[r("img",{class:"w-full h-[300px] object-cover mb-4",src:o.productData.imageUrl},null,8,E),I,R,l(r("div",V,"On Sale",512),[[g,o.productData.origin_price!==o.productData.price]])]),_:1},8,["to"]),r("h3",A,i(o.productData.title),1),o.productData.origin_price===o.productData.price?(s(),c("p",G," $"+i(o.productData.price)+" NTD ",1)):(s(),c("p",N,[r("span",B,"$"+i(o.productData.price),1),r("del",null,"$"+i(o.productData.origin_price)+" NTD",1)])),r("button",{type:"button",class:"px-2 py-1 transition duration-300 bg-transparent border group text-primary hover:text-white border-primary hover:bg-primary-darker",onClick:e[0]||(e[0]=H=>t.addCart(o.productData.id)),disabled:t.cartLoading.addCart&&t.tempId===o.productData.id},[P(" 加入購物車 "),l(d(f,{icon:["fas","spinner"],"spin-pulse":"",class:"text-primary group-hover:text-white"},null,512),[[g,t.cartLoading.addCart&&t.tempId===o.productData.id]])],8,U)])])}const J=y(k,[["render",$]]);export{J as P,F as p};
