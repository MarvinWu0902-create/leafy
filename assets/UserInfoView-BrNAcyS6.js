import{f as b,m as v,_ as g,o,c as a,a as r,w as s,e as k,T as M,b as e,s as h,h as D,v as L,d as c,t as n,r as m,F as S,g as C}from"./index-BxML_Rvc.js";import{o as x}from"./order-COFuk270.js";import{f as O}from"./time-CocRQhox.js";import{D as T}from"./DiscountBar-8DjjBtQR.js";import{m as y}from"./modal-B4E8_XOP.js";import"./axios-Bo0ATomq.js";const V={computed:{...b(y,["isModalShow"])},methods:{...v(y,["closeModal"])},watch:{isModalShow(t){t?document.body.style.overflow="hidden":(this.currentimgIndex=-1,document.body.style.overflow="auto")}}},B={key:0,class:"fixed inset-0 z-10 flex items-center justify-center bg-black/50"},N={key:0,class:"fixed inset-0 z-20 flex items-center justify-center"},A={class:"flex flex-col justify-between p-4 mx-3 overflow-x-auto bg-white rounded-lg shadow-lg w-80 h-2/3"},F={class:"flex justify-between border-b"},z={class:"flex flex-col justify-center me-3"},I=e("span",{class:"text-white transition duration-200 material-symbols-outlined group-hover:text-gray-300"}," close ",-1),P=[I],R={class:"flex justify-end p-1 md:p-4"};function E(t,d,$,w,_,p){return o(),a("div",null,[r(M,{name:"fade","enter-active-class":"transition duration-300","leave-active-class":"transition duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100 ","leave-to-class":"opacity-0"},{default:s(()=>[t.isModalShow?(o(),a("div",B)):k("",!0)]),_:1}),r(M,{name:"content","enter-active-class":"transition duration-300","leave-active-class":"transition duration-300","enter-from-class":"opacity-0 translate-y-[100px]","enter-to-class":"translate-y-0 opacity-100","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"opacity-0 translate-y-[100px]"},{default:s(()=>[t.isModalShow?(o(),a("div",N,[e("div",A,[e("div",null,[e("header",F,[h(t.$slots,"header"),e("div",z,[e("a",{class:"flex items-center justify-center cursor-pointer group",onClick:d[0]||(d[0]=(...l)=>t.closeModal&&t.closeModal(...l))},P)])]),e("section",null,[h(t.$slots,"section")])]),e("footer",R,[h(t.$slots,"footer")])])])):k("",!0)]),_:3})])}const U=g(V,[["render",E]]),q={components:{ModalComponent:U,DiscountBar:T},data(){return{freightPrice:20,freightLimit:100}},watch:{orderData(t){t&&this.openModal()}},computed:{...b(x,["orderData"]),isoverFreightLimit(){return this.orderData.total>=this.freightLimit}},methods:{...v(y,["openModal","closeModal"])}},G=e("div",{class:"p-1 md:p-4"},[e("h3",{class:"font-medium"},"消費金額明細")],-1),H={class:"p-1 border-b md:p-4"},J=e("h3",{class:"mb-1"},"已享用之優惠",-1),K={class:"p-1 border-b md:p-4"},Q={class:"flex justify-between"},W=e("p",{class:"mb-1 md:mb-4"},"小計:",-1),X={class:"flex justify-between"},Y=e("p",{class:"mb-1 md:mb-4"},"運費:",-1),Z={class:"p-1 md:p-4"},ee={class:"flex justify-between"},te=e("p",{class:"mb-1 md:mb-4"},"合計:",-1);function se(t,d,$,w,_,p){const l=m("DiscountBar"),f=m("ModalComponent");return o(),a("div",null,[r(f,null,{header:s(()=>[G]),section:s(()=>[e("div",H,[J,D(r(l,{class:"mb-2",color:"bg-green-400/50"},{name:s(()=>[c("免運優惠")]),content:s(()=>[c("滿$"+n(_.freightLimit)+"免運",1)]),_:1},512),[[L,p.isoverFreightLimit]]),r(l,{color:"bg-red-400/50"},{name:s(()=>[c("活動優惠")]),content:s(()=>[c("季活動促銷")]),_:1})]),e("div",K,[e("div",Q,[W,e("p",null,"NT$"+n(t.orderData.total),1)]),e("div",X,[Y,e("p",null,n(p.isoverFreightLimit?"免運":_.freightPrice),1)])]),e("div",Z,[e("div",ee,[te,e("p",null,"NT$"+n(t.orderData.total),1)])])]),footer:s(()=>[e("button",{type:"button",class:"w-full py-1 text-white bg-red-400",onClick:d[0]||(d[0]=(...u)=>t.closeModal&&t.closeModal(...u))},"關閉")]),_:1})])}const oe=g(q,[["render",se]]),ae={components:{OrderModal:oe},mixins:[O],computed:{...b(x,["orderAllData","orderLoading"])},methods:{...v(x,["getAllOrder","getSingleOrder"])},mounted(){this.getAllOrder()}},ne={class:"container"},ie={class:"p-4 my-10 border"},re={class:"flex justify-between p-4 text-sm text-center border md:text-start md:text-base"},de={class:"hidden font-medium text-red-500 md:block"},le=e("span",{class:"material-symbols-outlined"}," order_approve ",-1),ce={class:"block font-medium text-red-500 md:hidden"},me=["onClick"],_e=e("p",{class:"hidden tracking-wide md:block"},"消費明細",-1),pe=e("span",{class:"text-sm material-symbols-outlined"}," open_in_new ",-1),fe=[_e,pe],ue={class:"flex flex-col p-4 text-sm border md:flex-row md:text-base"},he={class:"flex-1 text-gray-500"},xe={class:"flex-1 text-gray-500"},ye={class:"flex flex-col p-4 text-sm border md:flex-row md:text-base"},be={class:"flex-1 hidden text-gray-500 md:block"},ve={key:0,class:"flex-1 text-gray-500"},ge={key:1,class:"flex items-center justify-between flex-1"},$e=e("p",{class:"text-gray-500 me-3"},"訂單狀態 : 訂單建立中",-1),we=e("span",{class:"text-base material-symbols-outlined"}," arrow_outward ",-1);function ke(t,d,$,w,_,p){const l=m("VueLoading"),f=m("OrderModal"),u=m("RouterLink");return o(),a("div",null,[r(l,{active:t.orderLoading.get,"can-cancel":!0,"is-full-page":!0},null,8,["active"]),e("div",ne,[r(f),e("div",ie,[(o(!0),a(S,null,C(t.orderAllData,(i,j)=>(o(),a("div",{class:"px-4 py-2",key:j},[e("div",re,[e("p",de,[le,c(" 訂單編號 : "+n(i.id),1)]),e("p",ce,n(i.id),1),e("button",{class:"flex items-center px-2 text-gray-400/80 md:text-sm md:text-white md:border md:rounded me-0 md:me-1 md:bg-red-400/80 md:hover:bg-red-400",type:"button",onClick:Me=>t.getSingleOrder(i.id)},fe,8,me)]),e("div",ue,[e("p",he,"訂單日期 : "+n(t.formatTimestamp(i.create_at*1e3)),1),e("p",xe,"總消費金額 : "+n(i.total),1)]),e("div",ye,[e("p",be,"運送狀態 : "+n(i.is_paid?"黑貓宅配-常溫(台灣含離島)":"-"),1),i.is_paid?(o(),a("p",ve,"訂單狀態 : 訂單處理中")):(o(),a("div",ge,[$e,r(u,{to:`/ordercreate/${i.id}`,class:"flex items-center justify-center px-2 py-1 text-gray-400 hover:text-primary"},{default:s(()=>[we,c(" 付款 ")]),_:2},1032,["to"])]))])]))),128))])])])}const Te=g(ae,[["render",ke]]);export{Te as default};
