import{f as v,m as b,_ as g,o,c as a,a as i,w as s,e as M,T as k,b as e,s as h,h as D,v as L,d,t as n,r as m,F as S,g as C}from"./index-BApqB6x0.js";import{o as y}from"./order-nmL0o0L1.js";import{f as O}from"./time-CocRQhox.js";import{D as T}from"./DiscountBar-uKW_fcq2.js";import{m as x}from"./modal-DzMg0S85.js";import"./axios-Bo0ATomq.js";const V={computed:{...v(x,["isModalShow"])},methods:{...b(x,["closeModal"])},watch:{isModalShow(t){t?document.body.style.overflow="hidden":(this.currentimgIndex=-1,document.body.style.overflow="auto")}}},B={key:0,class:"fixed inset-0 z-10 flex items-center justify-center bg-black/50"},N={key:0,class:"fixed inset-0 z-20 flex items-center justify-center"},A={class:"flex flex-col justify-between w-1/4 p-4 overflow-x-auto bg-white rounded-lg shadow-lg h-2/3"},F={class:"flex justify-between border-b"},z={class:"flex flex-col justify-center me-3"},I=e("span",{class:"text-white transition duration-200 material-symbols-outlined group-hover:text-gray-300"}," close ",-1),P=[I],R={class:"flex justify-end p-4"};function E(t,l,$,w,_,p){return o(),a("div",null,[i(k,{name:"fade","enter-active-class":"transition duration-300","leave-active-class":"transition duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100 ","leave-to-class":"opacity-0"},{default:s(()=>[t.isModalShow?(o(),a("div",B)):M("",!0)]),_:1}),i(k,{name:"content","enter-active-class":"transition duration-300","leave-active-class":"transition duration-300","enter-from-class":"opacity-0 translate-y-[100px]","enter-to-class":"translate-y-0 opacity-100","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"opacity-0 translate-y-[100px]"},{default:s(()=>[t.isModalShow?(o(),a("div",N,[e("div",A,[e("div",null,[e("header",F,[h(t.$slots,"header"),e("div",z,[e("a",{class:"flex items-center justify-center cursor-pointer group",onClick:l[0]||(l[0]=(...c)=>t.closeModal&&t.closeModal(...c))},P)])]),e("section",null,[h(t.$slots,"section")])]),e("footer",R,[h(t.$slots,"footer")])])])):M("",!0)]),_:3})])}const U=g(V,[["render",E]]),q={components:{ModalComponent:U,DiscountBar:T},data(){return{freightPrice:20,freightLimit:100}},watch:{orderData(t){t&&this.openModal()}},computed:{...v(y,["orderData"]),isoverFreightLimit(){return this.orderData.total>=this.freightLimit}},methods:{...b(x,["openModal","closeModal"])}},G=e("div",{class:"p-4"},[e("h3",{class:"font-medium"},"消費金額明細")],-1),H={class:"p-4 border-b"},J=e("h3",{class:"mb-1"},"已享用之優惠",-1),K={class:"p-4 border-b"},Q={class:"flex justify-between"},W=e("p",{class:"mb-4"},"小計:",-1),X={class:"flex justify-between"},Y=e("p",{class:"mb-4"},"運費:",-1),Z={class:"p-4"},ee={class:"flex justify-between"},te=e("p",{class:"mb-4"},"合計:",-1);function se(t,l,$,w,_,p){const c=m("DiscountBar"),f=m("ModalComponent");return o(),a("div",null,[i(f,null,{header:s(()=>[G]),section:s(()=>[e("div",H,[J,D(i(c,{class:"mb-2",color:"bg-green-400/50"},{name:s(()=>[d("免運優惠")]),content:s(()=>[d("滿$"+n(_.freightLimit)+"免運",1)]),_:1},512),[[L,p.isoverFreightLimit]]),i(c,{color:"bg-red-400/50"},{name:s(()=>[d("活動優惠")]),content:s(()=>[d("季活動促銷")]),_:1})]),e("div",K,[e("div",Q,[W,e("p",null,"NT$"+n(t.orderData.total),1)]),e("div",X,[Y,e("p",null,n(p.isoverFreightLimit?"免運":_.freightPrice),1)])]),e("div",Z,[e("div",ee,[te,e("p",null,"NT$"+n(t.orderData.total),1)])])]),footer:s(()=>[e("button",{type:"button",class:"w-full py-1 text-white bg-red-400",onClick:l[0]||(l[0]=(...u)=>t.closeModal&&t.closeModal(...u))},"關閉")]),_:1})])}const oe=g(q,[["render",se]]),ae={components:{OrderModal:oe},mixins:[O],computed:{...v(y,["orderAllData","orderLoading"])},methods:{...b(y,["getAllOrder","getSingleOrder"])},mounted(){this.getAllOrder()}},ne={class:"container"},ie={class:"p-4 my-10 border"},re={class:"flex justify-between py-2 text-sm text-center border md:p-4 md:text-start md:text-base"},le={class:"font-medium text-red-500"},ce=e("span",{class:"material-symbols-outlined"}," order_approve ",-1),de=["onClick"],me=e("p",{class:"tracking-wide me-1"},"消費明細",-1),_e=e("span",{class:"text-sm material-symbols-outlined"}," open_in_new ",-1),pe=[me,_e],fe={class:"flex flex-col p-4 text-sm border md:flex-row md:text-base"},ue={class:"flex-1 text-gray-500"},he={class:"flex-1 text-gray-500"},ye={class:"flex flex-col p-4 text-sm border md:flex-row md:text-base"},xe={class:"flex-1 text-gray-500"},ve={key:0,class:"flex-1 text-gray-500"},be={key:1,class:"flex items-center justify-between flex-1"},ge=e("p",{class:"text-gray-500 me-3"},"訂單狀態 : 訂單建立中",-1),$e=e("span",{class:"text-base material-symbols-outlined"}," arrow_outward ",-1);function we(t,l,$,w,_,p){const c=m("VueLoading"),f=m("OrderModal"),u=m("RouterLink");return o(),a("div",null,[i(c,{active:t.orderLoading.get,"can-cancel":!0,"is-full-page":!0},null,8,["active"]),e("div",ne,[i(f),e("div",ie,[(o(!0),a(S,null,C(t.orderAllData,(r,j)=>(o(),a("div",{class:"px-4 py-2",key:j},[e("div",re,[e("p",le,[ce,d(" 訂單編號 : "+n(r.id),1)]),e("button",{class:"flex items-center px-2 text-sm text-white border rounded bg-red-400/80 hover:bg-red-400",type:"button",onClick:Me=>t.getSingleOrder(r.id)},pe,8,de)]),e("div",fe,[e("p",ue,"訂單日期 : "+n(t.formatTimestamp(r.create_at*1e3)),1),e("p",he,"總消費金額 : "+n(r.total),1)]),e("div",ye,[e("p",xe,"運送狀態 : "+n(r.is_paid?"黑貓宅配-常溫(台灣含離島)":"-"),1),r.is_paid?(o(),a("p",ve,"訂單狀態 : 訂單處理中")):(o(),a("div",be,[ge,i(u,{to:`/ordercreate/${r.id}`,class:"flex items-center justify-center px-2 py-1 text-gray-400 hover:text-primary"},{default:s(()=>[$e,d(" 前往付款 ")]),_:2},1032,["to"])]))])]))),128))])])])}const Oe=g(ae,[["render",we]]);export{Oe as default};
