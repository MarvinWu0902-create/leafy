import{f as _,m as h,_ as I,o as l,c as a,a as w,w as P,b as t,t as g,n as f,h as d,v as p,k as m,y as E,e as x,F as S,g as U,d as u,r as b,j,z as L}from"./index-BApqB6x0.js";import{M as H,p as v,P as N,_ as z,s as F}from"./swal-DyEkD7xw.js";import{t as M}from"./token-C3mJysE-.js";import{m as C}from"./modal-DzMg0S85.js";import{T as q}from"./ToastCard-DmYN61V9.js";import"./axios-Bo0ATomq.js";const A={components:{ModalComponent:H},data(){return{modalProduct:{},currentimgIndex:-1,ismainEditing:!1}},watch:{filterCategory(e){this.getProduct(e,1)},tempProduct(e){this.modalProduct={...e}}},computed:{..._(v,["tempProduct","resInfo","filterCategory","productLoading"]),..._(C,["isModalShow","modalStatus","currentPage"]),categoryData(){return[...new Set(this.allproductData.map(e=>e.category))]},headerTitle(){return this.modalStatus==="adjust"?"編輯商品":this.modalStatus==="add"?"新增商品":"刪除商品"},isEnabled:{get(){return this.modalProduct.is_enabled===1},set(e){this.modalProduct.is_enabled=e?1:0}}},methods:{...h(v,["getProduct","modalConfirmClick"]),...h(M,["setHeaderToken"]),...h(C,["closeModal","setcurrentPage"]),imgClick(e){this.currentimgIndex===e?this.currentimgIndex=-1:this.currentimgIndex=e},urleditConfrim(){this.currentimgIndex=-1},mainimgClick(){this.ismainEditing=!this.ismainEditing},removeMainImg(){this.modalProduct.imageUrl="",this.ismainEditing=!1},removeSecImg(e){this.modalProduct.imagesUrl[e]="",this.currentimgIndex=-1}},mounted(){this.setHeaderToken()}},G={class:"p-4 text-white"},J={key:0},K=t("p",null,"確定要刪除?",-1),O=[K],Q={key:1},R={class:"grid grid-cols-1 gap-4 mb-4 bg-gray-200 rounded-sm"},W={class:"flex p-2"},X={class:"grid grid-cols-3 gap-4 mb-4"},Y={class:"col-span-2"},Z=t("label",{for:"name"},[u(" 商品名稱 "),t("span",{class:"text-red-400"},"*")],-1),$={class:"col-span-1"},tt=t("label",{for:"name"},[u(" 商品類別 "),t("span",{class:"text-red-400"},"*")],-1),et={class:"grid grid-cols-3 gap-4 mb-4"},ot={class:"col-span-1"},rt=t("label",{for:"origin-price"},[u(" 原價 "),t("span",{class:"text-red-400"},"*")],-1),nt={class:"col-span-1"},st=t("label",{for:"price"},[u(" 售價 "),t("span",{class:"text-red-400"},"*")],-1),lt={class:"col-span-1"},at=t("label",{for:"unit"},[u(" 單位 "),t("span",{class:"text-red-400"},"*")],-1),it={class:"col-span-1"},dt=t("label",{for:"enabled"},[u(" 是否啟用 "),t("span",{class:"text-red-400"},"*")],-1),ct={class:"grid grid-cols-1 gap-4 mb-4"},ut={class:"col-span-1"},mt=t("label",{for:"name"},[u(" 商品描述 "),t("span",{class:"text-red-400"},"*")],-1),ft={class:"grid grid-cols-1 gap-4 mb-4"},gt={class:"col-span-1"},pt=t("label",{for:"name"},[u(" 商品內容 "),t("span",{class:"text-red-400"},"*")],-1),bt=t("h3",null,[u("主圖 "),t("span",{class:"text-red-400"},"*")],-1),ht={class:"grid grid-cols-3 gap-4 mb-4"},yt=["src"],wt=t("span",{class:"after:absolute after:content-[''] after:top-6 after:right-2 after:w-4 after:h-1 after:-translate-x-1/2 after:-translate-y-1/2 after:bg-white/80"},null,-1),_t={class:"flex items-center"},vt=t("h3",null,[u("副圖 "),t("span",{class:"text-red-400"},"*")],-1),Ct={class:"grid grid-cols-3 gap-4 mb-4"},kt=["src"],Pt=["onClick"],xt=["onClick"],St=["onClick"],Ut=t("span",{class:"after:absolute after:content-[''] after:top-6 after:right-2 after:w-4 after:h-1 after:-translate-x-1/2 after:-translate-y-1/2 after:bg-white/80"},null,-1),It=["onClick"],Mt={class:"flex items-center"};function Bt(e,o,B,T,r,s){const k=b("ModalComponent");return l(),a("div",null,[w(k,null,{header:P(()=>[t("div",G,g(s.headerTitle),1)]),section:P(()=>[e.modalStatus==="delete"?(l(),a("div",J,O)):(l(),a("div",Q,[t("div",R,[t("ul",W,[t("li",null,[t("button",{class:f(["block px-4 py-2 rounded-sm",{"bg-white":e.currentPage==="info"}]),type:"button",onClick:o[0]||(o[0]=n=>e.setcurrentPage("info"))}," 商品資訊 ",2)]),t("li",null,[t("button",{class:f(["block px-4 py-2 rounded-sm",{"bg-white":e.currentPage==="content"}]),type:"button",onClick:o[1]||(o[1]=n=>e.setcurrentPage("content"))}," 商品內容 ",2)]),t("li",null,[t("button",{class:f(["block px-4 py-2 rounded-sm",{"bg-white":e.currentPage==="image"}]),type:"button",onClick:o[2]||(o[2]=n=>e.setcurrentPage("image"))}," 商品圖片 ",2)])])]),d(t("div",null,[t("div",X,[t("div",Y,[Z,d(t("input",{class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",type:"text","onUpdate:modelValue":o[3]||(o[3]=n=>r.modalProduct.title=n)},null,512),[[m,r.modalProduct.title]])]),t("div",$,[tt,d(t("input",{class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",type:"text","onUpdate:modelValue":o[4]||(o[4]=n=>r.modalProduct.category=n)},null,512),[[m,r.modalProduct.category]])])]),t("div",et,[t("div",ot,[rt,d(t("input",{id:"origin-price",class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",type:"text","onUpdate:modelValue":o[5]||(o[5]=n=>r.modalProduct.origin_price=n)},null,512),[[m,r.modalProduct.origin_price,void 0,{number:!0}]])]),t("div",nt,[st,d(t("input",{id:"price",class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",type:"text","onUpdate:modelValue":o[6]||(o[6]=n=>r.modalProduct.price=n)},null,512),[[m,r.modalProduct.price,void 0,{number:!0}]])]),t("div",lt,[at,d(t("input",{id:"unit",class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",type:"text","onUpdate:modelValue":o[7]||(o[7]=n=>r.modalProduct.unit=n)},null,512),[[m,r.modalProduct.unit]])]),t("div",it,[dt,d(t("input",{class:"ms-3",type:"checkbox",id:"enabled","onUpdate:modelValue":o[8]||(o[8]=n=>s.isEnabled=n)},null,512),[[E,s.isEnabled]])])])],512),[[p,e.currentPage==="info"]]),d(t("div",null,[t("div",ct,[t("div",ut,[mt,d(t("textarea",{class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",name:"description",id:"description",rows:"5","onUpdate:modelValue":o[9]||(o[9]=n=>r.modalProduct.description=n)},null,512),[[m,r.modalProduct.description]])])]),t("div",ft,[t("div",gt,[pt,d(t("input",{class:"w-full p-2 mt-1 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50",type:"text","onUpdate:modelValue":o[10]||(o[10]=n=>r.modalProduct.content=n)},null,512),[[m,r.modalProduct.content]])])])],512),[[p,e.currentPage==="content"]]),d(t("div",null,[bt,t("div",ht,[t("div",{class:f(["relative col-span-1",{"h-40":r.modalProduct.imageUrl}])},[r.modalProduct.imageUrl?(l(),a("img",{key:0,class:f(["object-cover w-full h-full",{"opacity-50":r.ismainEditing}]),src:r.modalProduct.imageUrl,alt:"#"},null,10,yt)):(l(),a("span",{key:1,class:"transition duration-300 cursor-pointer material-symbols-outlined text-8xl text-gray-400/30 hover:text-gray-400/50",onClick:o[11]||(o[11]=(...n)=>s.mainimgClick&&s.mainimgClick(...n))}," crop_free ")),r.ismainEditing&&r.modalProduct.imageUrl?(l(),a("span",{key:2,class:"after:absolute after:content-['編輯中'] after:cursor-pointer after:text-center after:top-1/2 after:-translate-y-1/2 after:left-0 after:w-full after:h-1/6 after:bg-yellow-400/20 after:hover:bg-yellow-400 after:transition after:duration-300 after:text-white after:tracking-widest",onClick:o[12]||(o[12]=(...n)=>s.mainimgClick&&s.mainimgClick(...n))})):!r.ismainEditing&&r.modalProduct.imageUrl?(l(),a("span",{key:3,class:"after:absolute after:content-['點選編輯'] after:cursor-pointer after:text-center after:bottom-0 after:left-0 after:w-full after:h-1/6 after:bg-yellow-400/20 after:hover:bg-yellow-400 after:transition after:duration-300 after:text-white after:tracking-widest",onClick:o[13]||(o[13]=(...n)=>s.mainimgClick&&s.mainimgClick(...n))})):x("",!0),wt,t("span",{class:"before:absolute before:cursor-pointer before:content-[''] before:top-2 before:right-2 before:w-8 before:h-8 before:rounded-full before:bg-white/30 before:hover:bg-white/40 after:transition after:duration-300",onClick:o[14]||(o[14]=(...n)=>s.removeMainImg&&s.removeMainImg(...n))})],2)]),d(t("div",_t,[d(t("input",{type:"text",class:"w-full p-2 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50","onUpdate:modelValue":o[15]||(o[15]=n=>r.modalProduct.imageUrl=n)},null,512),[[m,r.modalProduct.imageUrl]]),t("button",{type:"button",class:"w-20 p-2 border rounded",onClick:o[16]||(o[16]=n=>r.ismainEditing=!1)},"確認")],512),[[p,r.ismainEditing]]),vt,t("div",Ct,[(l(!0),a(S,null,U(r.modalProduct.imagesUrl,(n,c)=>(l(),a("div",{key:n,class:f(["relative col-span-1",{"h-40":r.modalProduct.imagesUrl[c]}])},[r.modalProduct.imagesUrl[c]?(l(),a("img",{key:0,class:f(["object-cover w-full h-full",{"opacity-50":r.currentimgIndex===c}]),src:r.modalProduct.imagesUrl[c],alt:"#"},null,10,kt)):(l(),a("span",{key:1,class:"transition duration-300 cursor-pointer material-symbols-outlined text-8xl text-gray-400/30 hover:text-gray-400/50",onClick:y=>s.imgClick(c)}," crop_free ",8,Pt)),r.currentimgIndex===c&&r.modalProduct.imagesUrl[c]?(l(),a("span",{key:2,class:"after:absolute after:content-['編輯中'] after:cursor-pointer after:text-center after:top-1/2 after:-translate-y-1/2 after:left-0 after:w-full after:h-1/6 after:bg-yellow-400/20 after:hover:bg-yellow-400 after:transition after:duration-300 after:text-white after:tracking-widest",onClick:y=>s.imgClick(c)},null,8,xt)):r.currentimgIndex!==c&&r.modalProduct.imagesUrl[c]?(l(),a("span",{key:3,class:"after:absolute after:content-['點選編輯'] after:cursor-pointer after:text-center after:bottom-0 after:left-0 after:w-full after:h-1/6 after:bg-yellow-400/20 after:hover:bg-yellow-400 after:transition after:duration-300 after:text-white after:tracking-widest",onClick:y=>s.imgClick(c)},null,8,St)):x("",!0),Ut,t("span",{class:"before:absolute before:cursor-pointer before:content-[''] before:top-2 before:right-2 before:w-8 before:h-8 before:rounded-full before:bg-white/30 before:hover:bg-white/40 after:transition after:duration-300",onClick:y=>s.removeSecImg(c)},null,8,It)],2))),128))]),d(t("div",Mt,[d(t("input",{type:"text",class:"w-full p-2 border rounded focus:outline-none focus:border-transparent focus:ring-2 focus:ring-primary/50","onUpdate:modelValue":o[17]||(o[17]=n=>r.modalProduct.imagesUrl[r.currentimgIndex]=n)},null,512),[[m,r.modalProduct.imagesUrl[r.currentimgIndex]],[p,r.currentimgIndex!==-1]]),t("button",{type:"button",class:"w-20 p-2 border rounded",onClick:o[18]||(o[18]=(...n)=>s.urleditConfrim&&s.urleditConfrim(...n))},"確認")],512),[[p,r.currentimgIndex!==-1]])],512),[[p,e.currentPage==="image"]])]))]),footer:P(()=>[t("button",{class:"px-4 py-2 transition duration-200 border rounded hover:text-white hover:bg-gray-700 me-1",type:"button",onClick:o[19]||(o[19]=(...n)=>e.closeModal&&e.closeModal(...n))},"取消"),t("button",{class:"px-4 py-2 text-white transition duration-200 bg-gray-700 border rounded hover:bg-gray-800",type:"button",onClick:o[20]||(o[20]=n=>e.modalConfirmClick(e.modalStatus,r.modalProduct))},"確認")]),_:1})])}const Tt=I(A,[["render",Bt]]),Vt={components:{PaginationBtn:N,ProductModal:Tt,ToastCard:q,SwalModal:z},mixins:[F],data(){return{currentCategory:"all",isswalShow:!1,delProducttempID:""}},computed:{..._(v,["allproductData","productData","resInfo","filterCategory","paginationData","productLoading"]),..._(C,["isModalShow","modalStatus","currentPage"]),categoryData(){return[...new Set(this.allproductData.map(e=>e.category))]}},watch:{currentCategory(e){this.categoryChange(e)}},methods:{...h(v,["getProduct","deleteProduct","productBtbClick","categoryChange"]),...h(M,["setHeaderToken"]),...h(C,["openModal","closeModal"]),deleteClick(e){this.isswalShow=!0,this.delProducttempID=e},swalHandler(e){e==="confirmed"&&this.deleteProduct(this.delProducttempID),this.isswalShow=!1,this.delProducttempID=""}},mounted(){this.setHeaderToken(),this.getProduct("all",1)}},Dt={class:"container"},Et={class:"flex items-end justify-between my-4"},jt=t("option",{value:"all"},"全部",-1),Lt=["value"],Ht=t("span",{class:"text-base leading-4 material-symbols-outlined me-1"}," add_circle ",-1),Nt=t("p",{class:"text-sm"},"新增商品",-1),zt=[Ht,Nt],Ft={class:"w-full mb-10 border"},qt=t("thead",{class:"bg-gray-200/50"},[t("tr",null,[t("th",{class:"p-2 font-normal"},"分類"),t("th",{class:"p-2 font-normal"},"商品名稱"),t("th",{class:"p-2 font-normal"},"原價"),t("th",{class:"p-2 font-normal"},"售價"),t("th",{class:"p-2 font-normal"},"啟用"),t("th"),t("th")])],-1),At={class:"p-2 text-center"},Gt={class:"p-2 text-center"},Jt={class:"p-2 text-center"},Kt={class:"p-2 text-center"},Ot={class:"flex justify-center p-2 text-center"},Qt={class:"w-20"},Rt=["onClick"],Wt={class:"w-20"},Xt=["onClick"];function Yt(e,o,B,T,r,s){const k=b("ToastCard"),n=b("SwalModal"),c=b("VueLoading"),y=b("ProductModal"),V=b("PaginationBtn");return l(),a("div",null,[w(k,{"toast-msg":e.resInfo,"show-time":2e3},null,8,["toast-msg"]),r.isswalShow?(l(),j(n,{key:0,title:e.swalConfig.title,text:e.swalConfig.text,icon:e.swalConfig.icon,showCancelButton:e.swalConfig.showCancelButton,confirmButtonText:e.swalConfig.confirmButtonText,cancelButtonText:e.swalConfig.cancelButtonText,onStatus:s.swalHandler},null,8,["title","text","icon","showCancelButton","confirmButtonText","cancelButtonText","onStatus"])):x("",!0),w(c,{active:e.productLoading.getProduct||e.productLoading.adjustProduct||e.productLoading.deleteProduct,"can-cancel":!0,"is-full-page":!0},null,8,["active"]),w(y),t("div",Dt,[t("div",Et,[d(t("select",{class:"w-24 p-2 border rounded cursor-pointer focus:outline-none",name:"category","onUpdate:modelValue":o[0]||(o[0]=i=>r.currentCategory=i),required:""},[jt,(l(!0),a(S,null,U(s.categoryData,i=>(l(),a("option",{value:i,key:i},g(i),9,Lt))),128))],512),[[L,r.currentCategory]]),t("div",null,[t("button",{class:"flex items-center justify-center px-2 py-1 text-sm font-bold tracking-wider text-white transition duration-300 bg-teal-500 border border-teal-500 rounded hover:text-teal-500 hover:bg-transparent",type:"button",onClick:o[1]||(o[1]=i=>e.productBtbClick("add"))},zt)])]),t("table",Ft,[qt,t("tbody",null,[(l(!0),a(S,null,U(e.productData,i=>(l(),a("tr",{class:"border-b",key:i.id},[t("td",At,g(i.category),1),t("td",Gt,g(i.title),1),t("td",Jt,g(i.origin_price),1),t("td",Kt,g(i.price),1),t("td",Ot,[t("span",{class:f(["material-symbols-outlined",{"text-green-600":i.is_enabled,"text-red-600":!i.is_enabled}])},g(i.is_enabled?"check_circle":"cancel"),3)]),t("td",Qt,[t("button",{class:"px-2 py-1 text-sm font-bold transition duration-200 bg-transparent border rounded border-stone-400 text-stone-400 hover:text-white hover:bg-stone-500",onClick:D=>e.productBtbClick("adjust",i)},"編輯",8,Rt)]),t("td",Wt,[t("button",{class:"px-2 py-1 text-sm font-bold text-red-500 transition duration-200 bg-transparent border border-red-500 rounded hover:text-white hover:bg-red-500",onClick:D=>s.deleteClick(i.id)},"刪除",8,Xt)])]))),128))])]),w(V,{"pagination-data":e.paginationData,"category-data":r.currentCategory},null,8,["pagination-data","category-data"])])])}const ne=I(Vt,[["render",Yt]]);export{ne as default};
